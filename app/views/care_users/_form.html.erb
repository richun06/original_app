<%= form_with(model: @care_user, local:true) do |form| %>
  <% if @care_user.errors.any? %>
  <div id="error_explanation">
    <h2><%= @care_user.errors.count %>件のエラーがあります。</h2>
    <ul>
    <% @care_user.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
    </ul>
  </div>
  <% end %>

  <% if current_user.admin? %>
    <%= form.hidden_field :user_id, :value => @care_user.user_id %>
  <% else %>
    <%= form.hidden_field :user_id, :value => current_user.id %>
  <% end %>

  <div>
    <%= form.label :名前 %>
    <%= form.text_field :name, :placeholder => "例) 山田 太郎" %>
  </div>

  <div>
    <%= form.label :生年月日 %>
    <%= raw sprintf(
      form.date_select(
        :birthday,
        use_month_numbers: true,
        start_year: 1900,
        end_year: (Time.now.year),
        default: Date.new(1989, 1, 1),
        date_separator: '%s'),
      '年 ', '月 ') + '日' %>
  </div>

  <div>
    <%= form.label :年齢 %>
    <%= form.number_field :age, :placeholder => "例) 60" %>
  </div>

  <div>
    <%= form.label :性別 %>
    <%= form.label :男 %>
    <%= form.radio_button :sex, :男 %>
    <%= form.label :女  %>
    <%= form.radio_button :sex, :女 %>
  </div>

  <% if current_user.admin? %>
    <div>
      <%= form.label :現在の利用 %>
      <%= form.label :あり %>
      <%= form.radio_button :availability, :あり %>
      <%= form.label :なし  %>
      <%= form.radio_button :availability, :なし %>
    </div>

    <div>
      <%= form.label :区分 %>
      <!-- <%#= form.select :division, options_for_select(CareUser.divisions), {prompt: '選択してください'} %> -->
      <%= form.select :division, [["L宿泊", "L宿泊"], ["S宿泊", "S宿泊"], ["通所", "通所"], ["訪問", "訪問"], ["その他", "その他"]], { include_blank: true, prompt: '選択してください' } %>
    </div>
  <% end %>

  <div class="field">
    <%= form.label :image %>
    <%= form.file_field :image %>
    <%= form.hidden_field :image_cache %>
  </div>

  <%= form.submit "登録" %>
  <%= link_to "戻る",care_users_path %>

<% end %>